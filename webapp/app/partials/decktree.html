<div>
    <div class="tree pointer nowrap" ng-class="{expanded: node.expand}" ng-click="node.expand = !node.expand"
         drop="onDrop($data, $event)" drop-effect="decktree" drag-over="" drag-over-class="droptarget" drop-accept="readonly ? false : 'json/deckid'">
        <img src="../img/tag.svg" height="16"> {{node.tagName || 'Unnamed tag'}}<span ng-show="node.decks.length"> ({{node.decks.length}})</span></div>
    <div ng-show="node.expand" class="indent nowrap" ng-repeat="child in node.children | orderBy: 'tagName'">
        <decktree node="child" readonly="readonly"></decktree>
    </div>
    <div ng-show="node.expand" class="indent nowrap" ng-repeat="deck in node.decks | orderBy: 'name'"
         draggable="{{!readonly}}" effect-allowed="decktree" draggable-data="{deck: deck.id}" draggable-type="deckid">
        <a ui-sref="app.deck({id: deck.id})" ui-sref-active="deck-active"><img src="../img/deck.svg" height="16"><span title="{{deck.name}}"> {{deck.name}}</span></a>
    </div>
</div>
